# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. PostgreSQL –≤ Docker
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `watch-configurator-db` –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `watch_configurator`
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `watchuser` / `watchpass`
- ‚úÖ –ü–æ—Ä—Ç: 5432

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CMS (Payload)
- ‚úÖ –ü–∞–ø–∫–∞ `/cms` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –ö–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã:
  - `WatchModels` - –º–æ–¥–µ–ª–∏ —á–∞—Å–æ–≤
  - `WatchStraps` - —Ä–µ–º–µ—à–∫–∏
  - `StrapParams` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–º–µ—à–∫–æ–≤
  - `AdditionalOptions` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
  - `PromoCodes` - –ø—Ä–æ–º–æ–∫–æ–¥—ã
  - `Media` - –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã

### 3. Backend API
- ‚úÖ –ú–æ–¥—É–ª—å CMS —Å–æ–∑–¥–∞–Ω –≤ `/backend/src/cms`
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ CMS
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:
  - `GET /cms/watch-models`
  - `GET /cms/watch-straps`
  - `GET /cms/strap-params/:id`
  - `GET /cms/additional-options`
  - `POST /cms/validate-promo`

### 4. Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ API –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: `/frontend/src/shared/api/cms.api.ts`
- ‚úÖ Store –æ–±–Ω–æ–≤–ª–µ–Ω —Å –º–µ—Ç–æ–¥–∞–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ CMS
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ Backend (–≤–∞—à —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥)

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL
docker-compose up -d postgres

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend (—Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º Frontend)
cd backend
npm run start:dev
```

–í–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ backend –Ω–∞ **http://localhost:3002**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –° CMS (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)

CMS –Ω–∞ Payload 3.x —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ API. 

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å CMS:**
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ESM —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- ‚ö†Ô∏è –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è PostgreSQL —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ö†Ô∏è Payload 3.x –∏–º–µ–µ—Ç breaking changes –≤ API

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å –¥–ª—è CMS:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL:**
   ```bash
   docker exec -it watch-configurator-db psql -U watchuser -d watch_configurator
   ```

2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Payload:**
   - –í–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Payload 2.x –≤–º–µ—Å—Ç–æ 3.x
   - –ò–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ MongoDB (–ø—Ä–æ—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏:**
   –°–µ–π—á–∞—Å –≤ `frontend/src/shared/store/configurator.store.ts` —É–∂–µ –µ—Å—Ç—å –º–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
   –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –Ω–∏–º–∏, –∞ CMS –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ.

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Docker
- `/docker-compose.yml` - PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### CMS
- `/cms/package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Payload
- `/cms/src/payload.config.ts` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Payload
- `/cms/src/server.ts` - —Å–µ—Ä–≤–µ—Ä CMS
- `/cms/src/collections/*.ts` - –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### Backend
- `/backend/src/cms/cms.module.ts`
- `/backend/src/cms/cms.controller.ts`
- `/backend/src/cms/cms.service.ts`

### Frontend
- `/frontend/src/shared/api/cms.api.ts` - API –∫–ª–∏–µ–Ω—Ç
- `/frontend/src/shared/store/configurator.store.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –º–µ—Ç–æ–¥–∞–º–∏ CMS

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `/INTEGRATION.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `/QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `/ENV_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- `/cms/SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CMS
- `/cms/seed-data.md` - –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- `/RUN.sh` - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- `/START.sh` - —Å–∫—Ä–∏–ø—Ç setup

## üîß –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Backend .env
```env
CMS_API_URL=http://localhost:3001/api
PORT=3002
```

### CMS .env
```env
DATABASE_URI=postgresql://watchuser:watchpass@localhost:5432/watch_configurator
PAYLOAD_SECRET=watch-configurator-secret-key-2025
PORT=3001
```

### Frontend .env.local
```env
NEXT_PUBLIC_API_URL=http://localhost:3002
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–±–æ—Ç—ã –°–ï–ô–ß–ê–°:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ Backend: `cd backend && npm run start:dev`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–∫–∏ –∏–∑ configurator.store.ts
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞

### –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è CMS –ü–û–ó–ñ–ï:
1. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ Strapi –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É Payload (–ø—Ä–æ—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Payload 2.x –≤–º–µ—Å—Ç–æ 3.x
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB –≤–º–µ—Å—Ç–æ PostgreSQL –¥–ª—è Payload

## üìù –ö–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PostgreSQL
docker ps | grep postgres
docker logs watch-configurator-db

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL
docker-compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker-compose up -d postgres

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
docker exec -it watch-configurator-db psql -U watchuser -d watch_configurator

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Backend
cd backend && npm run start:dev
```

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 3002: `lsof -i :3002`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

2. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
   - –î–∞–Ω–Ω—ã–µ –ø–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –º–æ–∫–æ–≤ –≤ store

3. **PostgreSQL –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω:**
   - `docker-compose up -d postgres`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `docker logs watch-configurator-db`

## ‚ú® –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä
2. üìù –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
3. üîÑ –†–µ—à–∏—Ç–µ –Ω—É–∂–µ–Ω –ª–∏ CMS —Å–µ–π—á–∞—Å –∏–ª–∏ –ø–æ–∑–∂–µ
4. üé® –î–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ UI/UX –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞

