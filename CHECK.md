# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ CMS

## üîç –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **PostgreSQL**: –∑–∞–ø—É—â–µ–Ω –≤ Docker –Ω–∞ –ø–æ—Ä—Ç—É 5432
2. **Payload CMS**: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:3003/admin
3. **–î–∞–Ω–Ω—ã–µ –≤ CMS**: –º–æ–¥–µ–ª—å TEST –¥–æ–±–∞–≤–ª–µ–Ω–∞
4. **CMS API**: http://localhost:3003/api/watch-models –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

**–ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–ï BACKEND!**

–Ø –æ–±–Ω–æ–≤–∏–ª —Ñ–∞–π–ª `next.middleware.ts` —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `/cms/*` endpoints, –Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

---

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Backend
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend –Ω–∞–∂–º–∏—Ç–µ **Ctrl+C**

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend –∑–∞–Ω–æ–≤–æ
```bash
cd /Users/user/slava-larionov/site-base/backend
npm run start:dev
```

### 3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:
```
[Nest] ... LOG [NestApplication] Nest application successfully started
üöÄ Server is running on http://localhost:3002
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Backend CMS API:
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:3002/cms/watch-models
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
[
  {
    "model_name": "TEST",
    "watch_model_name": "TEST",
    "watch_model_manufacturer": "TEST",
    "main_image": "http://localhost:3003/media/...",
    "choosen": false,
    "watch_sizes": [
      {
        "watch_size": "44",
        "choosen": false
      }
    ],
    "frame_colors": [
      {
        "color_name": "BLACK",
        "color_code": "#000000",
        "choosen": false
      }
    ]
  }
]
```

### 5. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä:
```
http://localhost:3002/configurator
```

–¢–µ–ø–µ—Ä—å –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –º–æ–¥–µ–ª—å TEST –∏–∑ CMS! üéâ

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### CMS –Ω–∞–ø—Ä—è–º—É—é (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å):
```bash
curl http://localhost:3003/api/watch-models
```

### Backend CMS endpoint (–ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞):
```bash
curl http://localhost:3002/cms/watch-models
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:3002/configurator
```

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –Ω–∞ /cms/watch-models:
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ Backend
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Backend –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab - –∏–¥—É—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∫ `/cms/watch-models`

### CMS API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ CMS –∑–∞–ø—É—â–µ–Ω
lsof -i :3003

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ CMS
tail -50 /tmp/cms_v2.log
```

---

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

```
Frontend ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç configuratorStore.initializeData()
           ‚Üì
cmsApi.getWatchModels() ‚Üí fetch('http://localhost:3002/cms/watch-models')
           ‚Üì
Backend CmsController ‚Üí GET /cms/watch-models
           ‚Üì
CmsService.getWatchModels() ‚Üí fetch('http://localhost:3003/api/watch-models')
           ‚Üì
Payload CMS ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ PostgreSQL
           ‚Üì
Backend ‚Üí —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
           ‚Üì
Frontend ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–æ–¥–µ–ª—å TEST
```

---

## ‚ú® –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Backend:

–í–∞—à–∞ –º–æ–¥–µ–ª—å TEST –∏–∑ Payload CMS –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–µ! 

–ó–∞—Ç–µ–º –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤ CMS:
- –ë–æ–ª—å—à–µ –º–æ–¥–µ–ª–µ–π —á–∞—Å–æ–≤
- –†–µ–º–µ—à–∫–∏ (Watch Straps)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–º–µ—à–∫–æ–≤ (Strap Params)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
- –ü—Ä–æ–º–æ–∫–æ–¥—ã

–ò –≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ! üöÄ

